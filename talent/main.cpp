#include <emscripten.h>
#include <iostream>
#include <string>
#include <cstring>

using namespace std;

extern "C" {
    EMSCRIPTEN_KEEPALIVE
    const char* get_personality_result(const char* answers, const char* password) {
        
        if (strcmp(password, "060810") != 0 && strcmp(password, "tf778") != 0) {
            return "【⚠️ 授权码无效或未输入】\n你已经完成了长达 80 题的深度推演，但你当前的授权码不正确。\n请联系主理人获取有效授权码，从首页重新进入测试！";
        }

        int insight = 0, disrupt = 0, control = 0, logic = 0;

        for (int i = 0; i < 80; i++) {
            int score = answers[i] - '0'; 
            if (i >= 0 && i < 20)        insight += score;   
            else if (i >= 20 && i < 40)  disrupt += score;   
            else if (i >= 40 && i < 60)  control += score;   
            else if (i >= 60 && i < 80)  logic += score;     
        }

        bool isHighInsight = (insight > 50);
        bool isHighDisrupt = (disrupt > 50);
        bool isHighControl = (control > 50);
        bool isHighLogic = (logic > 50);

        if (isHighInsight && isHighDisrupt && !isHighControl) 
            return "【深渊里的凝视者】\n\n▶ 深度剖析：你的天赋在于一眼看穿事物本质。世俗的道德和规则对你毫无意义，你喜欢在边缘试探。你不需要别人理解，孤独是你降维打击的修炼场。你极其敏锐，能在一片混乱中嗅到最底层的利益流向。\n\n▶ 核心优势：跨界降维打击、敏锐的危机嗅觉、毫无精神内耗。\n\n▶ 破局建议：不要试图去合群！你的价值在于‘破局’而非‘建设’。去寻找那些臃肿、古板但利润丰厚的传统行业，用你的洞察力找到它们的致命弱点，直接切入截流。你需要一个极度理性的合伙人帮你收拾残局。";
            
        else if (isHighControl && !isHighLogic && isHighDisrupt) 
            return "【极其危险的造梦师】\n\n▶ 深度剖析：你的天赋是极其恐怖的共情与洗脑能力。你深谙人性弱点，总能轻易挑动群体的情绪。别人在做事，而你在做局。你懂得如何制造焦虑，又如何适时地抛出希望的解药，让别人心甘情愿为你买单。\n\n▶ 核心优势：顶级情绪煽动力、完美的人设包装、操控舆论节奏。\n\n▶ 破局建议：去离‘人’最近的地方赚大钱。宗教、粉丝经济、高端知识付费、社群操盘是你的绝对主场。但必须注意，反噬的风险极高。你需要刻意建立一套财务隔离防火墙，不要在自己编织的梦境里迷失。";
            
        else if (!isHighInsight && isHighControl && isHighLogic) 
            return "【精密的人性精算师】\n\n▶ 深度剖析：你没有多余的同情心，所有人际交往在你的眼里都是投入产出比。你的天赋是能极其冷酷地把人脉变成可量化的资产。你不一定最懂感情，但你最懂如何用利益把人死死捆绑。\n\n▶ 核心优势：极致的资源置换、零情绪内耗、搭建利益共同体。\n\n▶ 破局建议：你天生适合做中介、平台撮合者或是高端猎头。不要亲自下场干脏活累活，你的核心竞争力是‘分配利益’。去寻找手里有资源但不懂变现的人，用你的逻辑把他们捏合成一个为你赚钱的机器。";
            
        else if (isHighInsight && isHighLogic && !isHighDisrupt) 
            return "【上帝视角的解题者】\n\n▶ 深度剖析：你的逻辑缜密到令人发指。当所有人陷入混乱和情绪化时，你能在三秒内抽出最核心的线索。你的天赋是把一切不可控的变数变成冰冷的数学模型，在合规的框架内把效率压榨到极致。\n\n▶ 核心优势：完美的数据推演、无懈可击的系统设计、极致的长期主义。\n\n▶ 破局建议：远离那些需要重度人际交往和推杯换盏的生意。你的战场在金融量化、后端算法、供应链优化或复杂的财税筹划。把你脑子里的逻辑变成一套软件或SaaS系统，让代码替你24小时赚钱。";
            
        else if (isHighDisrupt && isHighLogic && !isHighControl) 
            return "【冷血的破局手术刀】\n\n▶ 深度剖析：你天生就是来摧毁旧秩序的。你没有任何精神内耗，只要认定目标，你的执行力和破坏力一样惊人。你是最锋利的矛，不带任何感情色彩地切割掉一切阻挡你获取利润的障碍物。\n\n▶ 核心优势：极致的变现效率、无视沉没成本、雷厉风行的手段。\n\n▶ 破局建议：你适合去打最硬的仗、做最难的破冰项目。不良资产处置、企业内部清洗、极度内卷赛道的价格战，都是你施展才华的地方。你需要给自己设定极其严苛的法律底线，因为你的破坏欲很容易让你越界。";
            
        else if (isHighControl && isHighInsight && !isHighLogic) 
            return "【降维碾压的社交毒药】\n\n▶ 深度剖析：你的直觉准得可怕。你能瞬间读懂对方想听什么，并完美扮演那个角色。人们以为掌控了你，其实早就沦为了你的提线木偶。你在社交场上如鱼得水，擅长用最柔软的姿态掠夺最核心的资源。\n\n▶ 核心优势：顶级向上社交、获取核心机密、用情绪价值换取真金白银。\n\n▶ 破局建议：把你的天赋用在搞定那些极其难搞但手里握有重权的大佬身上。成为他们的白手套、军师或最信任的密友。你需要克服的弱点是‘战略上的短视’，不要为了短期的蝇头小利暴露你的真实意图。";
            
        else if (!isHighDisrupt && !isHighControl && isHighLogic) 
            return "【绝对静止的防御塔】\n\n▶ 深度剖析：你的天赋在于极其可怕的忍耐力和纪律性。你不会被任何风口诱惑，只要是在你的规则领域内，没有人能击败你。你像一台不知疲倦的复利机器，靠着绝对的稳定性和抗风险能力熬死所有对手。\n\n▶ 核心优势：变态级的抗压能力、坚不可摧的底层架构、跨越牛熊的稳定性。\n\n▶ 破局建议：不要去碰短线和投机！你的财富密码是时间的复利。去考取极其稀缺的牌照、掌握某种越老越吃香的硬核手艺，或者定投那些具有绝对垄断壁垒的资产。你的胜利，是剩者为王的胜利。";
            
        else 
            return "【混沌中的执棋人】\n\n▶ 深度剖析：你融合了极端的理性与疯狂的破坏欲。你既能看穿规则，又敢于掀翻棋盘。你不属于任何阵营，你本身就是一股不可阻挡的势能。你随时可以根据环境的变化，切换成孤狼或交际花。\n\n▶ 核心优势：极致的灵活性、深不可测的城府、永远留有后手。\n\n▶ 破局建议：你已经具备了成为一代枭雄的潜质。现在唯一的限制是你的‘野心’。不要再在小池塘里和虾米搏斗，去寻找那些能让你撬动十倍、百倍杠杆的核心枢纽。去整合资源，让上面所有的天赋者都为你打工！";
    }
}

int main() {
    printf("天赋挖掘算法（终极长文版）已启动...\n");
    return 0;
}