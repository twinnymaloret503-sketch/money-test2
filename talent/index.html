<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>隐藏天赋深度挖掘</title>
    <style>
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; background-color: #0a0a0a; color: #d1d1d1; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        header { margin-top: 40px; text-align: center; margin-bottom: 20px; width: 90%; }
        h1 { color: #D4AF37; font-size: 24px; letter-spacing: 2px; margin-bottom: 5px; font-weight: 400; }
        .progress { font-size: 14px; color: #666; letter-spacing: 1px; margin-bottom: 15px; }
        .dimension-tag { display: inline-block; background-color: rgba(212, 175, 55, 0.1); border: 1px solid #D4AF37; color: #D4AF37; padding: 5px 15px; border-radius: 20px; font-size: 13px; font-weight: bold; letter-spacing: 1px; margin-bottom: 10px; }
        #quiz-area { background-color: #111; border: 1px solid #222; border-radius: 12px; padding: 30px 20px; width: 90%; max-width: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .question { font-size: 18px; color: #fff; line-height: 1.6; margin-bottom: 30px; text-align: justify; }
        .options-container { display: flex; flex-direction: column; gap: 15px; }
        .option-btn { background-color: #1a1a1a; border: 1px solid #333; color: #aaa; padding: 18px 20px; border-radius: 8px; font-size: 16px; text-align: left; cursor: pointer; transition: all 0.3s ease; width: 100%; box-sizing: border-box; }
        .option-btn:hover { background-color: #2a2a2a; border-color: #D4AF37; color: #fff; transform: translateX(5px); }
        #result-box { display: none; background-color: #111; border: 1px solid #D4AF37; border-radius: 12px; padding: 30px 25px; width: 90%; max-width: 500px; margin-top: 20px; text-align: justify; }
        .result-title { color: #D4AF37; font-size: 22px; font-weight: bold; text-align: center; margin-bottom: 20px; display: block; }
        .highlight { color: #e0e0e0; font-size: 16px; line-height: 1.8; }
    </style>
</head>
<body>
    <header>
        <h1>隐藏天赋深度挖掘</h1>
        <div class="progress" id="progress-text">深渊初始化中...</div>
        <div class="dimension-tag" id="dim-text">正在连接 C++ 大脑...</div>
    </header>

    <div id="quiz-area">
        <div class="question" id="question-text">加载中...</div>
        <div class="options-container">
            <button class="option-btn" id="btn-1" onclick="answer(1)"></button>
            <button class="option-btn" id="btn-2" onclick="answer(2)"></button>
            <button class="option-btn" id="btn-3" onclick="answer(3)"></button>
            <button class="option-btn" id="btn-4" onclick="answer(4)"></button>
        </div>
    </div>
    <div id="result-box"></div>

    <script>
        var Module = {
            onRuntimeInitialized: function() {
                console.log("WASM Ready");
                loadQuestion();
            }
        };

        const questions = [
            // 第一重：洞察嗅觉 (1-20)
            {q:"陌生社交场合，你第一件事是？", options:["角落坐下","找人破冰","观察核心焦点","扫描权力结构"]},
            {q:"别人追求合群，你觉得孤独是？", options:["性格缺陷","暂时无奈","思考必需品","降维打击修炼场"]},
            {q:"听到好听的赞美，反应是？", options:["开心一整天","礼貌道谢","分析是否客观","警惕对方动机"]},
            {q:"看悬疑电影，何时猜到结局？", options:["最后才知","演到一半","逻辑推导","开场十分钟细节锁定"]},
            {q:"遇到复杂烂摊子，感觉是？", options:["崩溃逃避","焦虑硬理","思维导图","兴奋寻找核心线头"]},
            {q:"看待别人的悲惨遭遇？", options:["深度共情","努力安慰","提出建议","冷冰冰解构其角色"]},
            {q:"面对‘不可能’的任务？", options:["直接放弃","硬头皮试","总结失败原因","寻找认知盲区暴利"]},
            {q:"聊五分钟能猜出对方收入吗？", options:["不能","猜对性格","分析大概","精准嗅到生存焦虑"]},
            {q:"如何分辨撒谎？", options:["直觉","看眼神躲闪","逻辑盘问漏洞","看刻意的松弛感"]},
            {q:"什么是核心机密？", options:["财务报表","会议战略","营销计划","大佬潜意识的恐惧"]},
            {q:"如何获取前沿信息？", options:["官方大V","论坛讲座","数据研报","私密圈子碎语"]},
            {q:"目光比作什么？", options:["阳光","激光尺","X光","恶魔之眼"]},
            {q:"机会面前大部分人冲进去，你想？", options:["赶紧跟上","害怕有诈","计算胜率","找卖铲子的路径"]},
            {q:"对‘常识’的态度？", options:["必须遵守","经验总结","值得怀疑","平庸者的枷锁"]},
            {q:"新商业模式爆火，反应是？", options:["体验一下","讨论原因","拆解结构","透视人性弱点"]},
            {q:"别人努力却失败，你看法是？", options:["同情不公","运气太差","方向错误","低维勤奋掩盖懒惰"]},
            {q:"社会生存最需看透的是？", options:["人际规矩","行业风口","法律边界","分配暗网潜规则"]},
            {q:"有过精准的预感吗？", options:["不信预感","偶尔巧合","经常有","大脑后台处理的必然"]},
            {q:"面对伪君子，你会？", options:["被蒙骗","感觉不适","小心提防","配合演戏抽走梯子"]},
            {q:"天赋中最危险的部分？", options:["情绪失控","完美拖延","逻辑冷酷","蔑视世俗"]},

            // 第二重：规则破坏 (21-40)
            {q:"报销流程繁琐，你会？", options:["老实跑完","发邮件抗议","找人代跑","跳过环节直接找领导"]},
            {q:"面对“吃亏是福”？", options:["深信不疑","看情况","安慰借口","洗脑包"]},
            {q:"发现系统漏洞刷金币？", options:["举报","不敢用","偷偷用","疯狂刷并卖号"]},
            {q:"看捷径发财的人？", options:["鄙视","不平衡","好奇","认知跨越边界"]},
            {q:"钉子户阻碍项目？", options:["妥协","法律途径","利益交换","灰色手段施压"]},
            {q:"网红店排长队？", options:["排着","吃别的","买位置","装熟人插队"]},
            {q:"对权威的态度？", options:["敬畏服从","尊重知识","保持怀疑","破坏欲与兴奋"]},
            {q:"融资需要粉饰数据？", options:["拒绝","纠结放弃","巧妙粉饰","先拿到钱是真的"]},
            {q:"深夜红灯无车？", options:["等绿灯","直接过","跟人过","规则防傻不防我"]},
            {q:"新官上任第一把火？", options:["慢慢调","煮青蛙","分化势力","空降亲信开除头目"]},
            {q:"面对极度内卷？", options:["跟着卷","到点走","摸鱼","掀桌子证明无价值"]},
            {q:"规矩是死的人是活的？", options:["变通圆滑","找帮手","替代方案","规矩都有后门"]},
            {q:"不道德手段能秒杀对手？", options:["守底线","怕坏名声","看利益大小","毫不犹豫执行"]},
            {q:"最讨厌听到哪句话？", options:["做不到","你怎么这样","不懂逻辑","凭什么不守规矩"]},
            {q:"不公平的比赛？", options:["抗议退赛","尽力比","找漏洞","用更作弊的手段"]},
            {q:"越级汇报？", options:["大忌","除非大错","能解决问题","老板看到价值就行"]},
            {q:"公司强制低效流程？", options:["办事","提建议","偷偷用高效工具","带头违反用业绩逼改"]},
            {q:"你理解的野心？", options:["好日子","动力","渴望权力","重建个人帝国的破坏欲"]},
            {q:"前人栽树后人乘凉？", options:["感激乘凉","理所当然","分析栽树","拔树卖掉"]},
            {q:"安稳重复的环境？", options:["幸福","无聊","压抑想辞职","主动制造危机"]},

            // 第三重：人心操控 (41-60)
            {q:"让固执的人改主意？", options:["据理力争","大吵一架","权威施压","植入恐惧使其自推"]},
            {q:"平息众怒的方法？", options:["调查报告","道歉","冷处理","抛出更大的瓜"]},
            {q:"下属暗中较劲？", options:["强行和解","公事公办","不管","控制斗争烈度使其内卷"]},
            {q:"如何看待“画大饼”？", options:["厌恶虚伪","欺诈","无奈之举","高级统御术"]},
            {q:"借巨款的方法？", options:["卑微恳求","计划清单","朋友说情","包装成稀缺暴利投资"]},
            {q:"摧毁别人自信？", options:["当面骂","专业碾压","抢夺资源","PUA使其失去判断"]},
            {q:"面对虚荣炫耀的人？", options:["远离","表面附和","当乐子看","疯狂夸奖使其买单"]},
            {q:"关系纽带的本质？", options:["爱与奉献","三观契合","法律财产","利益捆绑与软肋"]},
            {q:"别人示弱时，你感受？", options:["心疼","尴尬","理性分析","掌控他的窗口"]},
            {q:"谈判中对方提无理要求？", options:["愤怒走人","逐条反驳","回去考虑","诡异微笑击溃心理"]},
            {q:"手下犯错，为使其忠诚？", options:["扣奖金","制度处理","开除","代其扛锅使其欠命"]},
            {q:"社交场扮演什么角色？", options:["透明人","搞笑担当","领袖","信息收集中心"]},
            {q:"人类最大的弱点？", options:["贪婪","懒惰","愚蠢","傲慢与渴望认同"]},
            {q:"发现被PUA时？", options:["愤怒拉黑","自我怀疑","逻辑反驳","顺着演反向榨取"]},
            {q:"团结陌生人的方法？", options:["军规训练","物质奖励","魅力感染","树立共同外敌"]},
            {q:"如何看待眼泪？", options:["宣泄","无能","手段","精准释放的情绪武器"]},
            {q:"忠诚但平庸的老员工？", options:["高薪养着","闲职","辞退","作为忠诚吉祥物规训他人"]},
            {q:"昂贵的商品是什么？", options:["寿命健康","认知差","权力","虚荣心溢价"]},
            {q:"推销时的切入点？", options:["质量","性价比","逻辑","失去或被抛弃的恐慌"]},
            {q:"拨弄别人情绪的快感？", options:["没感觉","避免报应","激怒时反击","颤栗的权力感"]},

            // 第四重：绝对理性 (61-80)
            {q:"消耗你的感情关系？", options:["痛苦内耗","大吵大闹","不舍成本","一秒斩断抹杀"]},
            {q:"生意惨赔时反应？", options:["崩溃","骂环境","赌徒翻本","面无表情计算复利"]},
            {q:"运气在商业中的作用？", options:["决定一切","很重要","实力改变","概率对冲系统"]},
            {q:"冷酷算计的人能帮你赚钱？", options:["远离","不敢合作","提防合作","兴奋合作"]},
            {q:"猝死边缘接到百万项目？", options:["命要紧","延期","强打精神","剥离痛苦全速运转"]},
            {q:"如何做重大决策？", options:["听建议","感性走","优缺点对比","冷血财务模型压力测试"]},
            {q:"副手贪小钱，你会？", options:["背叛愤怒","当面对质","下不为例","计算价值留把柄或送牢房"]},
            {q:"看到穷困潦倒的人？", options:["同情","环境不好","认知太低","无波动只看镰刀在哪"]},
            {q:"看待未来死亡？", options:["忌讳","恐惧","顺其自然","规划杠杆最大化"]},
            {q:"被暴发户羞辱？", options:["泼酒","怼回去","忍气吞声","计算补偿或隐蔽报复"]},
            {q:"难解的技术壁垒？", options:["换赛道","请顾问","死磕","寻找掌握技术的弱者收购"]},
            {q:"相信绝对公平吗？", options:["相信","相对公平","不公怨气","维持秩序的安慰剂"]},
            {q:"无用社交邀请？", options:["痛苦参加","借口推脱","硬生拒绝","冷血筛选机制"]},
            {q:"情怀梦想创业者？", options:["感动","能理解","看产品","警惕其掩盖剥削"]},
            {q:"直觉与数据冲突？", options:["信直觉","纠结","信数据","绝对信数据算法"]},
            {q:"阶层跃迁的豪赌？", options:["不赌","小钱试","All in","计算凯利公式下注"]},
            {q:"高效团队的核心？", options:["温暖","晋升体系","高薪","冷血淘汰与利益分配"]},
            {q:"至亲阻碍事业？", options:["选亲情","争吵内耗","说服","冷酷切断干扰权限"]},
            {q:"处理危机的能力？", options:["慌乱","需平复","快冷静","无情绪芯片的终结者"]},
            {q:"真正的力量是什么？", options:["身体素质","人脉资源","财富积累","绝对理性的机器大脑"]}
        ];

        const urlParams = new URLSearchParams(window.location.search);
        const authCode = urlParams.get('code') || "none";
        let currentQuestion = 0; let myAnswers = ""; 

        function loadQuestion() {
            if (currentQuestion >= questions.length) return;
            let d = "";
            if(currentQuestion < 20) d="▶ 洞察嗅觉";
            else if(currentQuestion < 40) d="▶ 规则破坏";
            else if(currentQuestion < 60) d="▶ 人心操控";
            else d="▶ 绝对理性";
            document.getElementById('dim-text').innerText = d;
            document.getElementById('progress-text').innerText = `进度：${currentQuestion + 1} / 80`;
            document.getElementById('question-text').innerText = questions[currentQuestion].q;
            for(let i=1; i<=4; i++) document.getElementById('btn-'+i).innerText = questions[currentQuestion].options[i-1];
        }

        function answer(choice) {
            myAnswers += choice; currentQuestion++;
            if (currentQuestion < questions.length) { loadQuestion(); } 
            else {
                document.getElementById('quiz-area').style.display = 'none';
                document.getElementById('dim-text').style.display = 'none';
                document.getElementById('progress-text').innerText = '正在运算...';
                var res = Module.ccall('get_personality_result', 'string', ['string', 'string'], [myAnswers, authCode]);
                let div = document.getElementById('result-box');
                div.style.display = 'block';
                let idx = res.indexOf('】') + 1;
                div.innerHTML = "<span class='result-title'>" + res.substring(0, idx) + "</span>" +
                                "<span class='highlight'>" + res.substring(idx).replace(/\n/g, "<br>") + "</span>";
            }
        }
    </script>
    <script src="game.js"></script>
</body>
</html>
